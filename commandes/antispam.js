const a4_0x40fe5c=a4_0xe87a;(function(_0x171271,_0x49d864){const _0x3f7a23=a4_0xe87a,_0x3cea07=_0x171271();while(!![]){try{const _0x4b4964=parseInt(_0x3f7a23(0x12c))/0x1+parseInt(_0x3f7a23(0x128))/0x2*(parseInt(_0x3f7a23(0x135))/0x3)+-parseInt(_0x3f7a23(0x10e))/0x4*(parseInt(_0x3f7a23(0x131))/0x5)+parseInt(_0x3f7a23(0x140))/0x6+parseInt(_0x3f7a23(0x142))/0x7+-parseInt(_0x3f7a23(0x118))/0x8+parseInt(_0x3f7a23(0x130))/0x9*(-parseInt(_0x3f7a23(0x11a))/0xa);if(_0x4b4964===_0x49d864)break;else _0x3cea07['push'](_0x3cea07['shift']());}catch(_0x6caa3f){_0x3cea07['push'](_0x3cea07['shift']());}}}(a4_0x2a80,0x7c558));import a4_0x466973 from'fs/promises';import a4_0x4c49de from'path';import{fileURLToPath}from'url';import{delete_message,send_text_message,send_reaction_message}from'../utils/sendmessagewa.js';function a4_0xe87a(_0x1de710,_0x265a2a){const _0x2a804d=a4_0x2a80();return a4_0xe87a=function(_0xe87a87,_0x581fbb){_0xe87a87=_0xe87a87-0x106;let _0x3a7d3c=_0x2a804d[_0xe87a87];return _0x3a7d3c;},a4_0xe87a(_0x1de710,_0x265a2a);}import{isAdmin}from'../utils/gestion_groupe.js';const __dirname=a4_0x4c49de[a4_0x40fe5c(0x11f)](fileURLToPath(import.meta['url'])),ANTISPAM_FILE=a4_0x4c49de[a4_0x40fe5c(0x112)](__dirname,a4_0x40fe5c(0x126)),defaultConfig={'groupesActives':{},'parametresGlobaux':{'supprimerMessage':!![],'avertir':!![],'expulser':!![],'maxMessages':0x5,'timeFrame':0x2710},'tentatives':{}};let config={...defaultConfig};async function chargerConfig(){const _0x37d8d6=a4_0x40fe5c;try{await a4_0x466973['mkdir'](a4_0x4c49de[_0x37d8d6(0x11f)](ANTISPAM_FILE),{'recursive':!![]}),await a4_0x466973[_0x37d8d6(0x11e)](ANTISPAM_FILE);const _0x4aa0d8=await a4_0x466973[_0x37d8d6(0x109)](ANTISPAM_FILE,_0x37d8d6(0x125)),_0x25f482=JSON[_0x37d8d6(0x136)](_0x4aa0d8),_0x453f04=Date[_0x37d8d6(0x12e)]();for(const _0x1492a1 in _0x25f482[_0x37d8d6(0x139)]){_0x453f04-_0x25f482[_0x37d8d6(0x139)][_0x1492a1]['lastMessageTime']>0x5265c00&&delete _0x25f482[_0x37d8d6(0x139)][_0x1492a1];}return{...defaultConfig,..._0x25f482};}catch(_0x288620){if(_0x288620[_0x37d8d6(0x106)]!=='ENOENT')return console[_0x37d8d6(0x107)]('[AntiSpam]\x20Erreur\x20chargement\x20config:',_0x288620),await a4_0x466973[_0x37d8d6(0x12b)](ANTISPAM_FILE,JSON[_0x37d8d6(0x116)](defaultConfig,null,0x2),_0x37d8d6(0x125)),{...defaultConfig};return{...defaultConfig};}}async function sauvegarderConfig(){const _0x1d9aa2=a4_0x40fe5c;try{await a4_0x466973[_0x1d9aa2(0x12b)](ANTISPAM_FILE,JSON['stringify'](config,null,0x2),'utf-8');}catch(_0x110322){console[_0x1d9aa2(0x107)](_0x1d9aa2(0x119),_0x110322);}}((async()=>{config=await chargerConfig();})());async function enregistrerMessage(_0x335ac5,_0x47b8d3){const _0x46687d=a4_0x40fe5c,_0x23f046=_0x335ac5+':'+_0x47b8d3,_0x4161e5=Date[_0x46687d(0x12e)]();return config[_0x46687d(0x139)][_0x23f046]&&_0x4161e5-config['tentatives'][_0x23f046][_0x46687d(0x110)]>config[_0x46687d(0x108)]['timeFrame']?config['tentatives'][_0x23f046]={'count':0x1,'lastMessageTime':_0x4161e5}:config[_0x46687d(0x139)][_0x23f046]={'count':(config[_0x46687d(0x139)][_0x23f046]?.[_0x46687d(0x10b)]||0x0)+0x1,'lastMessageTime':_0x4161e5},await sauvegarderConfig(),config[_0x46687d(0x139)][_0x23f046]['count'];}function a4_0x2a80(){const _0x3f7c57=['protocolMessage','lastMessageTime','[AntiSpam]\x20Erreur:','join','\x20messages/','‚ñ∏\x20Max\x20messages:\x20','message','stringify','catch','2045136IxRaxT','[AntiSpam]\x20Erreur\x20sauvegarde\x20config:','230930YsjPic','endsWith','>\x20‚ö†Ô∏è\x20Admin\x20requis','participants','access','dirname','>\x20‚ÑπÔ∏è\x20Non\x20activ√©','jid','timeFrame','participant','remove','utf-8','json/antispam.json','>\x20üö´\x20Configuration\x20AntiSpam\x20mise\x20√†\x20jour','8LFUHhg','groupMetadata','‚ñ∏\x20Suppression:\x20','writeFile','771778nJCUKp','‚ñ∏\x20Expulsion:\x20','now','\x20n\x27est\x20plus\x20dans\x20le\x20groupe\x20','468ZdwSSX','4528495EmikPK','>\x20‚ùå\x20@','reactionMessage','groupParticipantsUpdate','422256rmPnBh','parse','>\x20‚ö†Ô∏è\x20AntiSpam\x20non\x20activ√©\x20dans\x20ce\x20groupe','maxMessages','tentatives','\x20a\x20√©t√©\x20expuls√©\x20pour\x20spam.','>\x20‚ö†Ô∏è\x20Commande\x20r√©serv√©e\x20aux\x20groupes','groupesActives','supprimerMessage','@g.us','>\x20üö´\x20AntiSpam\x20d√©sactiv√©','3531816RpiKxz','key','6636189PUuTCy','‚ñ∏\x20P√©riode:\x20','>\x20üö´\x20AntiSpam\x20activ√©\x0a','code','error','parametresGlobaux','readFile','expulser','count',',\x20attention\x20vous\x20avez\x20envoy√©\x20','avertir','4miwNnN'];a4_0x2a80=function(){return _0x3f7c57;};return a4_0x2a80();}async function resetTentatives(_0x532ccf,_0x3f23dd){const _0x5bcf78=a4_0x40fe5c,_0x3cd1c5=_0x532ccf+':'+_0x3f23dd;config[_0x5bcf78(0x139)][_0x3cd1c5]&&(delete config[_0x5bcf78(0x139)][_0x3cd1c5],await sauvegarderConfig());}export function creerAntiSpamBaileys(_0x5ecb7a,_0x2f4456,_0x5124f7){return async()=>{const _0x50a766=a4_0xe87a;try{if(!_0x2f4456[_0x50a766(0x115)]||!_0x5124f7[_0x50a766(0x11b)](_0x50a766(0x13e)))return;if(_0x2f4456[_0x50a766(0x115)][_0x50a766(0x10f)]||_0x2f4456[_0x50a766(0x115)][_0x50a766(0x133)])return;const _0x7ca4dc=config[_0x50a766(0x13c)][_0x5124f7];if(!_0x7ca4dc)return;const _0x1f5995=_0x2f4456[_0x50a766(0x141)][_0x50a766(0x123)];if(!_0x1f5995||await isAdmin(_0x5ecb7a,_0x5124f7,_0x1f5995))return;const _0x575fc3=_0x1f5995['split']('@')[0x0],_0x37c897=await enregistrerMessage(_0x5124f7,_0x1f5995);_0x37c897===_0x7ca4dc['maxMessages']-0x1&&(_0x7ca4dc[_0x50a766(0x10d)]!==![]?await send_text_message(_0x5ecb7a,_0x2f4456,'>\x20‚ö†Ô∏è\x20@'+_0x575fc3+_0x50a766(0x10c)+_0x37c897+'\x20messages\x20rapidement\x20!\x20(Limite:\x20'+_0x7ca4dc[_0x50a766(0x138)]+_0x50a766(0x113)+_0x7ca4dc['timeFrame']/0x3e8+'s)',_0x5124f7,[_0x1f5995],![],!![]):await send_text_message(_0x5ecb7a,_0x2f4456));if(_0x37c897>=_0x7ca4dc[_0x50a766(0x138)]){_0x7ca4dc[_0x50a766(0x13d)]!==![]&&await delete_message(_0x5ecb7a,_0x2f4456,_0x5124f7,_0x2f4456[_0x50a766(0x141)])[_0x50a766(0x117)](()=>{});if(_0x7ca4dc[_0x50a766(0x10a)]!==![])try{const _0x4ffeeb=await _0x5ecb7a[_0x50a766(0x129)](_0x5124f7),_0x5ea91c=_0x4ffeeb[_0x50a766(0x11d)]['some'](_0x2ab682=>_0x2ab682[_0x50a766(0x121)]===_0x1f5995);_0x5ea91c?(await _0x5ecb7a[_0x50a766(0x134)](_0x5124f7,[_0x1f5995],_0x50a766(0x124)),await send_text_message(_0x5ecb7a,_0x2f4456,_0x50a766(0x132)+_0x575fc3+_0x50a766(0x13a),_0x5124f7,[_0x1f5995],![],!![])):console['log']('[AntiSpam]\x20L\x27utilisateur\x20'+_0x1f5995+_0x50a766(0x12f)+_0x5124f7);}catch(_0x129192){console[_0x50a766(0x107)]('[AntiSpam]\x20Erreur\x20lors\x20de\x20l\x27expulsion:',_0x129192);}await resetTentatives(_0x5124f7,_0x1f5995);}}catch(_0x3bad51){console[_0x50a766(0x107)](_0x50a766(0x111),_0x3bad51);}};}export async function activerAntiSpam(_0x3b8cf9,_0x40b7d5,_0x338b91,_0x1a5ca0){const _0x1d4bd9=a4_0x40fe5c;if(!_0x1a5ca0)return await send_reaction_message(_0x3b8cf9,_0x40b7d5,_0x338b91,'‚ùå'),await send_text_message(_0x3b8cf9,_0x40b7d5,_0x1d4bd9(0x13b),_0x338b91),![];const _0x42b53d=_0x40b7d5[_0x1d4bd9(0x141)][_0x1d4bd9(0x123)];if(!await isAdmin(_0x3b8cf9,_0x338b91,_0x42b53d))return await send_reaction_message(_0x3b8cf9,_0x40b7d5,_0x338b91,'‚ùå'),await send_text_message(_0x3b8cf9,_0x40b7d5,_0x1d4bd9(0x11c),_0x338b91),![];if(!config['groupesActives'][_0x338b91])return config[_0x1d4bd9(0x13c)][_0x338b91]={...config['parametresGlobaux']},await sauvegarderConfig(),await send_reaction_message(_0x3b8cf9,_0x40b7d5,_0x338b91,'‚úÖ'),await send_text_message(_0x3b8cf9,_0x40b7d5,_0x1d4bd9(0x144)+(_0x1d4bd9(0x114)+config[_0x1d4bd9(0x108)][_0x1d4bd9(0x138)]+'\x0a')+(_0x1d4bd9(0x143)+config[_0x1d4bd9(0x108)][_0x1d4bd9(0x122)]/0x3e8+'s\x0a')+(_0x1d4bd9(0x12a)+(config[_0x1d4bd9(0x108)][_0x1d4bd9(0x13d)]?'‚úÖ':'‚ùå')+'\x0a')+('‚ñ∏\x20Avertissement:\x20'+(config[_0x1d4bd9(0x108)][_0x1d4bd9(0x10d)]?'‚úÖ':'‚ùå')+'\x0a')+(_0x1d4bd9(0x12d)+(config['parametresGlobaux'][_0x1d4bd9(0x10a)]?'‚úÖ':'‚ùå')),_0x338b91),!![];return await send_reaction_message(_0x3b8cf9,_0x40b7d5,_0x338b91,'‚ÑπÔ∏è'),await send_text_message(_0x3b8cf9,_0x40b7d5,'>\x20‚ÑπÔ∏è\x20D√©j√†\x20activ√©',_0x338b91),![];}export async function desactiverAntiSpam(_0x4e0b3c,_0x869ddf,_0x5ababd,_0x3c410c){const _0x4a85d2=a4_0x40fe5c;if(!_0x3c410c)return await send_reaction_message(_0x4e0b3c,_0x869ddf,_0x5ababd,'‚ùå'),await send_text_message(_0x4e0b3c,_0x869ddf,_0x4a85d2(0x13b),_0x5ababd),![];const _0x3331c2=_0x869ddf[_0x4a85d2(0x141)][_0x4a85d2(0x123)];if(!await isAdmin(_0x4e0b3c,_0x5ababd,_0x3331c2))return await send_reaction_message(_0x4e0b3c,_0x869ddf,_0x5ababd,'‚ùå'),await send_text_message(_0x4e0b3c,_0x869ddf,_0x4a85d2(0x11c),_0x5ababd),![];if(config[_0x4a85d2(0x13c)][_0x5ababd])return delete config['groupesActives'][_0x5ababd],await sauvegarderConfig(),await send_reaction_message(_0x4e0b3c,_0x869ddf,_0x5ababd,'‚úÖ'),await send_text_message(_0x4e0b3c,_0x869ddf,_0x4a85d2(0x13f),_0x5ababd),!![];return await send_reaction_message(_0x4e0b3c,_0x869ddf,_0x5ababd,'‚ÑπÔ∏è'),await send_text_message(_0x4e0b3c,_0x869ddf,_0x4a85d2(0x120),_0x5ababd),![];}export async function listerGroupesAntiSpam(){const _0x518a68=a4_0x40fe5c;return Object['keys'](config[_0x518a68(0x13c)])['map'](_0x33f064=>_0x33f064['split']('@')[0x0])['join']('\x0a')||'Aucun\x20groupe';}export async function configurerAntiSpam(_0x53a7f2,_0x1755c3,_0x42ba47,_0x267cb8){const _0xb29926=a4_0x40fe5c;if(!config['groupesActives'][_0x42ba47])return await send_reaction_message(_0x53a7f2,_0x1755c3,_0x42ba47,'‚ùå'),await send_text_message(_0x53a7f2,_0x1755c3,_0xb29926(0x137),_0x42ba47),![];return _0x267cb8['maxMessages']&&(config[_0xb29926(0x13c)][_0x42ba47][_0xb29926(0x138)]=parseInt(_0x267cb8[_0xb29926(0x138)])),_0x267cb8[_0xb29926(0x122)]&&(config['groupesActives'][_0x42ba47][_0xb29926(0x122)]=parseInt(_0x267cb8[_0xb29926(0x122)])*0x3e8),_0x267cb8[_0xb29926(0x13d)]!==undefined&&(config[_0xb29926(0x13c)][_0x42ba47]['supprimerMessage']=_0x267cb8[_0xb29926(0x13d)]),_0x267cb8[_0xb29926(0x10d)]!==undefined&&(config[_0xb29926(0x13c)][_0x42ba47][_0xb29926(0x10d)]=_0x267cb8[_0xb29926(0x10d)]),_0x267cb8['expulser']!==undefined&&(config['groupesActives'][_0x42ba47][_0xb29926(0x10a)]=_0x267cb8[_0xb29926(0x10a)]),await sauvegarderConfig(),await send_reaction_message(_0x53a7f2,_0x1755c3,_0x42ba47,'‚úÖ'),await send_text_message(_0x53a7f2,_0x1755c3,_0xb29926(0x127),_0x42ba47),!![];}