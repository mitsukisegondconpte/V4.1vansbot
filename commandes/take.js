function a32_0x48e1(_0x38f18b,_0x18af33){const _0x140ce7=a32_0x140c();return a32_0x48e1=function(_0x48e1e5,_0x4079a2){_0x48e1e5=_0x48e1e5-0x161;let _0x340c44=_0x140ce7[_0x48e1e5];return _0x340c44;},a32_0x48e1(_0x38f18b,_0x18af33);}const a32_0x1b1daa=a32_0x48e1;(function(_0x50aa39,_0x16e79e){const _0x1411bf=a32_0x48e1,_0x4339af=_0x50aa39();while(!![]){try{const _0x5e5ccf=parseInt(_0x1411bf(0x18a))/0x1*(-parseInt(_0x1411bf(0x178))/0x2)+parseInt(_0x1411bf(0x17b))/0x3*(-parseInt(_0x1411bf(0x183))/0x4)+parseInt(_0x1411bf(0x16a))/0x5+parseInt(_0x1411bf(0x162))/0x6+-parseInt(_0x1411bf(0x190))/0x7*(-parseInt(_0x1411bf(0x193))/0x8)+parseInt(_0x1411bf(0x16b))/0x9+parseInt(_0x1411bf(0x18f))/0xa;if(_0x5e5ccf===_0x16e79e)break;else _0x4339af['push'](_0x4339af['shift']());}catch(_0x4db5a5){_0x4339af['push'](_0x4339af['shift']());}}}(a32_0x140c,0xd215b));import{Sticker,StickerTypes}from'wa-sticker-formatter';import a32_0x1d0c27 from'sharp';import a32_0x461d02 from'../utils/download_media.js';import{listerPremierFichierTemporaire}from'../utils/vu_unique.js';import{join}from'path';import a32_0x18add1 from'fs/promises';import a32_0x417942 from'dotenv';function a32_0x140c(){const _0x34a683=['1612284RsRCpO','VansBot','unlink','vanscode','webp','chemin','pushName','Erreur\x20lors\x20de\x20la\x20création\x20du\x20sticker:','8tUtQUY','Échec\x20de\x20la\x20modification\x20du\x20sticker:\x20','Aucun\x20média\x20trouvé\x20après\x20téléchargement','Le\x20fichier\x20n\x27est\x20pas\x20un\x20WebP\x20valide\x20et\x20n\x27a\x20pas\x20pu\x20être\x20converti','MEDIA_PATH','Le\x20fichier\x20téléchargé\x20est\x20introuvable','error','2pvXOIL','57454250','env','extendedTextMessage','Répondez\x20à\x20un\x20message\x20contenant\x20un\x20sticker','13617030YfeNzr','21NcfEPS','>\x20❌\x20Erreur:\x20','contextInfo','1637448wKfewA','\x0a\x20𝑽𝑨𝑵𝑺𝑩𝑶𝑻\x20ˣᴹᴰ\x20ᴺᴱᵂ\x20ᴳᴱᴺᴱᴿᴬᵀᴵᴼᴺ','1272204rNrGOf','toFormat','Le\x20message\x20cité\x20est\x20introuvable','Erreur\x20lors\x20de\x20la\x20validation\x20WebP:','takesticker','VANSBOT','stanzaId','Utilisateur','2759125qozNlj','7193502FmAUUV','readFile','quotedMessage','config','FUN','length','log','Le\x20fichier\x20n\x27est\x20pas\x20un\x20WebP\x20valide,\x20tentative\x20de\x20conversion...','toBuffer','hex','message','slice','52494646','1603520KCeUHF','toString','warn'];a32_0x140c=function(){return _0x34a683;};return a32_0x140c();}import{send_reaction_message,send_text_message}from'../utils/sendmessagewa.js';a32_0x417942[a32_0x1b1daa(0x16e)]();const MEDIA_PATH=process[a32_0x1b1daa(0x18c)][a32_0x1b1daa(0x187)];async function validateWebP(_0x3ea1fc){const _0x48e7ac=a32_0x1b1daa;try{if(!_0x3ea1fc||_0x3ea1fc[_0x48e7ac(0x170)]<0xc)return![];const _0x15e3f5=_0x3ea1fc['slice'](0x0,0x4)[_0x48e7ac(0x179)]('hex')===_0x48e7ac(0x177),_0x3d83cf=_0x3ea1fc[_0x48e7ac(0x176)](0x8,0xc)['toString'](_0x48e7ac(0x174))===_0x48e7ac(0x18b);return _0x15e3f5&&_0x3d83cf;}catch(_0x22a04c){return console[_0x48e7ac(0x189)](_0x48e7ac(0x165),_0x22a04c),![];}}async function createSticker(_0x473a83,_0x3b94b4,_0x1d4cd5){const _0x321f6d=a32_0x1b1daa;try{const _0x32a143=new Sticker(_0x473a83,{'pack':_0x3b94b4||_0x321f6d(0x17c),'author':_0x1d4cd5||_0x321f6d(0x17e),'type':StickerTypes['FULL'],'quality':0x46,'categories':[_0x321f6d(0x16f),_0x321f6d(0x167)]});return await _0x32a143[_0x321f6d(0x173)]();}catch(_0x4dd10c){console[_0x321f6d(0x189)](_0x321f6d(0x182),_0x4dd10c);throw new Error('Échec\x20de\x20la\x20création\x20du\x20sticker:\x20'+_0x4dd10c[_0x321f6d(0x175)]);}}export async function modifyLocalSticker(_0x2e8a9c,_0x293592,_0x5eb8ac){const _0x2844a9=a32_0x1b1daa;try{const _0x4ebee8=await a32_0x18add1[_0x2844a9(0x16c)](_0x2e8a9c);if(!await validateWebP(_0x4ebee8)){console[_0x2844a9(0x171)](_0x2844a9(0x172));const _0x407ead=await a32_0x1d0c27(_0x4ebee8)[_0x2844a9(0x163)](_0x2844a9(0x17f))[_0x2844a9(0x173)]();if(!await validateWebP(_0x407ead))throw new Error(_0x2844a9(0x186));return await createSticker(_0x407ead,_0x293592,_0x5eb8ac);}return await createSticker(_0x4ebee8,_0x293592,_0x5eb8ac);}catch(_0x4b8884){console[_0x2844a9(0x189)]('Erreur\x20lors\x20de\x20la\x20modification\x20du\x20sticker:',_0x4b8884);throw new Error(_0x2844a9(0x184)+_0x4b8884['message']);}}export async function handleTakeSticker(_0x352ff3,_0x1a95f4,_0x2a04a8,_0xda444b,_0x31d10e){const _0x82765f=a32_0x1b1daa;let _0x3426a2=null;_0x31d10e=_0x82765f(0x161),_0xda444b=_0x1a95f4[_0x82765f(0x181)]||_0x82765f(0x169);try{if(!_0x1a95f4?.['message']?.[_0x82765f(0x18d)]?.[_0x82765f(0x192)])throw new Error(_0x82765f(0x18e));const _0x5e0393=_0x1a95f4[_0x82765f(0x175)][_0x82765f(0x18d)][_0x82765f(0x192)];if(!_0x5e0393[_0x82765f(0x16d)])throw new Error(_0x82765f(0x164));const _0x3b02dc={'key':{'remoteJid':_0x1a95f4['key']['remoteJid'],'id':_0x5e0393[_0x82765f(0x168)],'fromMe':![]},'message':_0x5e0393['quotedMessage']};await send_reaction_message(_0x352ff3,_0x1a95f4,_0x2a04a8,'⚙');const _0x52a10e=await a32_0x461d02(_0x352ff3,_0x3b02dc,'takesticker');if(!_0x52a10e)throw new Error('Échec\x20du\x20téléchargement\x20du\x20média');const _0x50eee1=await listerPremierFichierTemporaire(MEDIA_PATH,_0x82765f(0x166));if(!_0x50eee1)throw new Error(_0x82765f(0x185));_0x3426a2=join(MEDIA_PATH,_0x50eee1[_0x82765f(0x180)]);try{await a32_0x18add1['access'](_0x3426a2);}catch{throw new Error(_0x82765f(0x188));}const _0x18a415=await modifyLocalSticker(_0x3426a2,_0xda444b,_0x31d10e);await _0x352ff3['sendMessage'](_0x2a04a8,{'sticker':_0x18a415}),await send_reaction_message(_0x352ff3,_0x1a95f4,_0x2a04a8,'✅');}catch(_0x1a0366){console[_0x82765f(0x189)]('Erreur\x20dans\x20handleTakeSticker:',_0x1a0366),await send_text_message(_0x352ff3,_0x1a95f4,_0x82765f(0x191)+_0x1a0366[_0x82765f(0x175)],_0x2a04a8,[],!![],![],!![]);}finally{if(_0x3426a2)try{await a32_0x18add1[_0x82765f(0x17d)](_0x3426a2);}catch(_0x596751){console[_0x82765f(0x17a)]('Nettoyage\x20du\x20fichier\x20temporaire\x20échoué:',_0x596751);}}}