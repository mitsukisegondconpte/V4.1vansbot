function a1_0x53c7(_0xaf90b5,_0x5aa078){const _0x2aa2b5=a1_0x2aa2();return a1_0x53c7=function(_0x53c757,_0x2fda28){_0x53c757=_0x53c757-0xfa;let _0x3b70b5=_0x2aa2b5[_0x53c757];return _0x3b70b5;},a1_0x53c7(_0xaf90b5,_0x5aa078);}const a1_0x105b51=a1_0x53c7;(function(_0x1459df,_0x6bd4f9){const _0x30bd46=a1_0x53c7,_0x45dcb1=_0x1459df();while(!![]){try{const _0x193065=parseInt(_0x30bd46(0x102))/0x1*(-parseInt(_0x30bd46(0x135))/0x2)+parseInt(_0x30bd46(0x134))/0x3+-parseInt(_0x30bd46(0x128))/0x4*(parseInt(_0x30bd46(0x130))/0x5)+-parseInt(_0x30bd46(0x139))/0x6*(parseInt(_0x30bd46(0x12d))/0x7)+parseInt(_0x30bd46(0x13d))/0x8+-parseInt(_0x30bd46(0x13e))/0x9*(parseInt(_0x30bd46(0x146))/0xa)+parseInt(_0x30bd46(0xfd))/0xb;if(_0x193065===_0x6bd4f9)break;else _0x45dcb1['push'](_0x45dcb1['shift']());}catch(_0x17748e){_0x45dcb1['push'](_0x45dcb1['shift']());}}}(a1_0x2aa2,0xd3b9c));import a1_0x51e172 from'fs/promises';import a1_0x571524 from'path';import{fileURLToPath}from'url';import{delete_message,send_text_message,send_reaction_message}from'../utils/sendmessagewa.js';import{isAdmin}from'../utils/gestion_groupe.js';import{log}from'console';const __dirname=a1_0x571524[a1_0x105b51(0xff)](fileURLToPath(import.meta[a1_0x105b51(0x138)])),ANTILINK_FILE=a1_0x571524[a1_0x105b51(0xfa)](__dirname,a1_0x105b51(0x12e)),defaultConfig={'groupesActives':{},'parametresGlobaux':{'supprimerMessage':!![],'avertir':!![],'expulser':!![],'maxTentatives':0x3},'whitelist':[],'tentatives':{}};let config={...defaultConfig};async function chargerConfig(){const _0x241b25=a1_0x105b51;try{await a1_0x51e172[_0x241b25(0x124)](a1_0x571524[_0x241b25(0xff)](ANTILINK_FILE),{'recursive':!![]}),await a1_0x51e172['access'](ANTILINK_FILE);const _0x5c83a6=await a1_0x51e172[_0x241b25(0x11d)](ANTILINK_FILE,_0x241b25(0x142)),_0x3b7611=JSON['parse'](_0x5c83a6),_0xba1f23=Date['now']();for(const _0x375cc1 in _0x3b7611['tentatives']){_0xba1f23-_0x3b7611[_0x241b25(0x116)][_0x375cc1][_0x241b25(0x13a)]>0x5265c00&&delete _0x3b7611[_0x241b25(0x116)][_0x375cc1];}return{...defaultConfig,..._0x3b7611};}catch(_0x2138c9){return _0x2138c9[_0x241b25(0x117)]!==_0x241b25(0x144)&&console['error'](_0x241b25(0x10b),_0x2138c9),{...defaultConfig};}}async function sauvegarderConfig(){const _0x11c62d=a1_0x105b51;try{await a1_0x51e172[_0x11c62d(0x133)](ANTILINK_FILE,JSON[_0x11c62d(0x12b)](config,null,0x2),_0x11c62d(0x142));}catch(_0x3aa3d6){console[_0x11c62d(0x105)](_0x11c62d(0x13b),_0x3aa3d6);}}((async()=>{config=await chargerConfig();})());async function enregistrerTentative(_0x590f9e,_0x656b0d){const _0x1f7cfd=a1_0x105b51,_0x496ce0=_0x590f9e+':'+_0x656b0d,_0x7ef1db=Date[_0x1f7cfd(0x101)]();return config[_0x1f7cfd(0x116)][_0x496ce0]={'count':(config[_0x1f7cfd(0x116)][_0x496ce0]?.[_0x1f7cfd(0x129)]||0x0)+0x1,'lastAttempt':_0x7ef1db},await sauvegarderConfig(),config[_0x1f7cfd(0x116)][_0x496ce0][_0x1f7cfd(0x129)];}async function resetTentatives(_0x1aa5d1,_0x43b9b2){const _0x1ff3bd=a1_0x105b51,_0x2007c7=_0x1aa5d1+':'+_0x43b9b2;config[_0x1ff3bd(0x116)][_0x2007c7]&&(delete config[_0x1ff3bd(0x116)][_0x2007c7],await sauvegarderConfig());}function detecterLiens(_0x4ad25c){const _0x2b7e91=a1_0x105b51,_0x164c35=/(https?:\/\/|www\.)[^\s]+[\w]/gi;return _0x4ad25c?.[_0x2b7e91(0x141)](_0x164c35)||[];}function filtrerLiensInterdits(_0x56e896,_0x37bb0e){const _0xc5c40f=a1_0x105b51;return _0x56e896['filter'](_0x4baa1e=>!_0x37bb0e['some'](_0x1a5269=>_0x4baa1e[_0xc5c40f(0x106)]()[_0xc5c40f(0x127)](_0x1a5269[_0xc5c40f(0x106)]())));}export function creerAntiLinkBaileys(_0x3f53c0,_0x19f8d2,_0x2deed1){return async()=>{const _0x3d28bf=a1_0x53c7;try{if(!_0x19f8d2['message']||!_0x2deed1[_0x3d28bf(0x125)]('@g.us'))return;if(_0x19f8d2[_0x3d28bf(0x121)][_0x3d28bf(0x115)]||_0x19f8d2['message'][_0x3d28bf(0x10c)])return;const _0x406df3=config[_0x3d28bf(0x132)][_0x2deed1];if(!_0x406df3)return;const _0x162a78=_0x19f8d2[_0x3d28bf(0x112)][_0x3d28bf(0x107)];if(!_0x162a78||await isAdmin(_0x3f53c0,_0x2deed1,_0x162a78))return log(_0x3d28bf(0x12f),{'senderId':_0x162a78});const _0x453092=_0x19f8d2[_0x3d28bf(0x121)]['conversation']||_0x19f8d2[_0x3d28bf(0x121)][_0x3d28bf(0x10f)]?.['text']||_0x19f8d2[_0x3d28bf(0x121)][_0x3d28bf(0x110)]?.[_0x3d28bf(0x11a)]||_0x19f8d2[_0x3d28bf(0x121)][_0x3d28bf(0x118)]?.[_0x3d28bf(0x11a)]||_0x19f8d2[_0x3d28bf(0x121)]['documentMessage']?.[_0x3d28bf(0x11a)],_0x288e46=detecterLiens(_0x453092);if(_0x288e46['length']===0x0)return;const _0x6db275=[...config[_0x3d28bf(0x111)],..._0x406df3['whitelist']||[]],_0x1bb5f5=filtrerLiensInterdits(_0x288e46,_0x6db275);if(_0x1bb5f5[_0x3d28bf(0xfe)]===0x0)return;const _0x30d50f=_0x162a78[_0x3d28bf(0x108)]('@')[0x0],_0x690f02=await enregistrerTentative(_0x2deed1,_0x162a78);_0x406df3[_0x3d28bf(0x123)]!==![]&&setTimeout(()=>delete_message(_0x3f53c0,_0x19f8d2,_0x2deed1,_0x19f8d2[_0x3d28bf(0x112)])['catch'](()=>{}),0x3e8),_0x406df3[_0x3d28bf(0x143)]!==![]&&await send_text_message(_0x3f53c0,_0x19f8d2,_0x3d28bf(0x109)+_0x30d50f+',\x20liens\x20interdits\x20détectés\x20!\x20('+_0x690f02+'/'+(_0x406df3[_0x3d28bf(0x140)]||0x3)+')',_0x2deed1,[_0x162a78],![],!![],![]),_0x690f02>=(_0x406df3['maxTentatives']||0x3)&&_0x406df3['expulser']&&(await _0x3f53c0[_0x3d28bf(0x119)](_0x2deed1,[_0x162a78],_0x3d28bf(0x103))[_0x3d28bf(0x12c)](()=>{}),await send_text_message(_0x3f53c0,_0x19f8d2,_0x3d28bf(0x100)+_0x30d50f+_0x3d28bf(0x10e),_0x2deed1,[_0x162a78],![],!![],![]),await resetTentatives(_0x2deed1,_0x162a78));}catch(_0x1a064d){console[_0x3d28bf(0x105)](_0x3d28bf(0x137),_0x1a064d);}};}function a1_0x2aa2(){const _0x222dde=['error','toLowerCase','participant','split','>\x20⚠️\x20@','>\x20⛓\x20AntiLink\x20activé\x0a','[AntiLink]\x20Erreur\x20chargement\x20config:','reactionMessage','expulser','\x20expulsé\x20pour\x20liens\x20interdits','extendedTextMessage','imageMessage','whitelist','key','\x22\x20whitelisté','▸\x20Expulsion:\x20','protocolMessage','tentatives','code','videoMessage','groupParticipantsUpdate','caption','parametresGlobaux','>\x20✅\x20\x22','readFile','>\x20ℹ️\x20\x22','Aucune','Aucun\x20groupe','message','▸\x20Avertissement:\x20','supprimerMessage','mkdir','endsWith','>\x20⛓\x20AntiLink\x20désactivé','includes','431256HUogMB','count','keys','stringify','catch','1126594HEJCLs','json/antilink.json','Admin\x20détecté\x20-\x20Ignoré','40PUxqER','>\x20ℹ️\x20Déjà\x20activé','groupesActives','writeFile','3011310nkScSb','11446WAaSHS','\x22\x20déjà\x20autorisé','[AntiLink]\x20Erreur:','url','12QbhwhU','lastAttempt','[AntiLink]\x20Erreur\x20sauvegarde\x20config:','>\x20⚠️\x20Commande\x20réservée\x20aux\x20groupes','10903584iwdIjo','9ozXHeH','>\x20ℹ️\x20Non\x20activé','maxTentatives','match','utf-8','avertir','ENOENT','map','5257270VEtlMJ','join','▸\x20Whitelist:\x20','push','17299777wdUpGy','length','dirname','>\x20❌\x20@','now','238hIfdrG','remove','▸\x20Suppression:\x20'];a1_0x2aa2=function(){return _0x222dde;};return a1_0x2aa2();}export async function ajouterGroupeAntilink(_0x21673a,_0x5e489d,_0x4d82c8,_0xa189bd){const _0x5220c4=a1_0x105b51;if(!_0xa189bd)return await send_reaction_message(_0x21673a,_0x5e489d,_0x4d82c8,'❌'),await send_text_message(_0x21673a,_0x5e489d,_0x5220c4(0x13c),_0x4d82c8),![];const _0x570fd4=_0x5e489d['key'][_0x5220c4(0x107)];if(!await isAdmin(_0x21673a,_0x4d82c8,_0x570fd4))return await send_reaction_message(_0x21673a,_0x5e489d,_0x4d82c8,'❌'),await send_text_message(_0x21673a,_0x5e489d,'>\x20⚠️\x20Admin\x20requis',_0x4d82c8),![];return!config[_0x5220c4(0x132)][_0x4d82c8]?(config[_0x5220c4(0x132)][_0x4d82c8]={...config[_0x5220c4(0x11b)]},await sauvegarderConfig(),await send_reaction_message(_0x21673a,_0x5e489d,_0x4d82c8,'✅'),await send_text_message(_0x21673a,_0x5e489d,_0x5220c4(0x10a)+(_0x5220c4(0x104)+(config['parametresGlobaux'][_0x5220c4(0x123)]?'✅':'❌')+'\x0a')+(_0x5220c4(0x122)+(config['parametresGlobaux']['avertir']?'✅':'❌')+'\x0a')+(_0x5220c4(0x114)+(config[_0x5220c4(0x11b)][_0x5220c4(0x10d)]?'✅':'❌')+'\x0a')+(_0x5220c4(0xfb)+(config[_0x5220c4(0x111)]['length']>0x0?config[_0x5220c4(0x111)][_0x5220c4(0xfa)](',\x20'):_0x5220c4(0x11f))),_0x4d82c8),!![]):(await send_reaction_message(_0x21673a,_0x5e489d,_0x4d82c8,'ℹ️'),await send_text_message(_0x21673a,_0x5e489d,_0x5220c4(0x131),_0x4d82c8),![]);}export async function supprimerGroupeAntilink(_0x2aebbd,_0x2ea530,_0x47b06d,_0x12c33b){const _0x2d4b69=a1_0x105b51;if(!_0x12c33b)return await send_reaction_message(_0x2aebbd,_0x2ea530,_0x47b06d,'❌'),await send_text_message(_0x2aebbd,_0x2ea530,'>\x20⚠️\x20Commande\x20réservée\x20aux\x20groupes',_0x47b06d),![];const _0x23675d=_0x2ea530['key']['participant'];if(config[_0x2d4b69(0x132)][_0x47b06d])return delete config[_0x2d4b69(0x132)][_0x47b06d],await sauvegarderConfig(),await send_reaction_message(_0x2aebbd,_0x2ea530,_0x47b06d,'✅'),await send_text_message(_0x2aebbd,_0x2ea530,_0x2d4b69(0x126),_0x47b06d),!![];return await send_reaction_message(_0x2aebbd,_0x2ea530,_0x47b06d,'ℹ️'),await send_text_message(_0x2aebbd,_0x2ea530,_0x2d4b69(0x13f),_0x47b06d),![];}export async function listerGroupesAntilink(){const _0x4d2339=a1_0x105b51;return Object[_0x4d2339(0x12a)](config[_0x4d2339(0x132)])[_0x4d2339(0x145)](_0x474b45=>_0x474b45[_0x4d2339(0x108)]('@')[0x0])[_0x4d2339(0xfa)]('\x0a')||_0x4d2339(0x120);}export async function whitelistAntilink(_0x13478c,_0x3e1ab6,_0xf6582d,_0x48f9d7){const _0xaab343=a1_0x105b51;if(!config[_0xaab343(0x111)][_0xaab343(0x127)](_0x48f9d7))return config[_0xaab343(0x111)][_0xaab343(0xfc)](_0x48f9d7),await sauvegarderConfig(),await send_reaction_message(_0x13478c,_0x3e1ab6,_0xf6582d,'✅'),await send_text_message(_0x13478c,_0x3e1ab6,_0xaab343(0x11c)+_0x48f9d7+_0xaab343(0x113),_0xf6582d),!![];return await send_reaction_message(_0x13478c,_0x3e1ab6,_0xf6582d,'ℹ️'),await send_text_message(_0x13478c,_0x3e1ab6,_0xaab343(0x11e)+_0x48f9d7+_0xaab343(0x136),_0xf6582d),![];}