const a28_0x20c2c3=a28_0x4482;(function(_0x3e14da,_0x2ec901){const _0x5dd408=a28_0x4482,_0x9a52f6=_0x3e14da();while(!![]){try{const _0x3be20c=-parseInt(_0x5dd408(0x128))/0x1+parseInt(_0x5dd408(0x13a))/0x2*(-parseInt(_0x5dd408(0x150))/0x3)+parseInt(_0x5dd408(0x156))/0x4+parseInt(_0x5dd408(0x12a))/0x5+parseInt(_0x5dd408(0x12b))/0x6*(parseInt(_0x5dd408(0x13c))/0x7)+-parseInt(_0x5dd408(0x151))/0x8*(parseInt(_0x5dd408(0x120))/0x9)+parseInt(_0x5dd408(0x148))/0xa;if(_0x3be20c===_0x2ec901)break;else _0x9a52f6['push'](_0x9a52f6['shift']());}catch(_0xa4044d){_0x9a52f6['push'](_0x9a52f6['shift']());}}}(a28_0x13aa,0x629e8));import{send_audio_message,send_contact_message,send_gif_message,send_image_message,send_location_message,send_reaction_message,send_text_message,send_video_message,chercherFichier,send_sticker_message}from'../utils/sendmessagewa.js';import{supprimerFichierCommencantPar}from'../utils/vu_unique.js';function a28_0x13aa(){const _0x2b5ef8=['>\x20‚ö†Ô∏è\x20Aucun\x20m√©dia\x20trouv√©\x20avec\x20le\x20nom\x20\x22','63RSKMkM','.webp','./media','Erreur\x20lors\x20de\x20la\x20suppression\x20du\x20m√©dia','list\x20pour\x20voir\x20les\x20m√©dias\x20disponibles',')\x20supprim√©\x20avec\x20succ√®s.','>\x20‚ö†Ô∏è\x20Erreur\x20lors\x20de\x20la\x20r√©cup√©ration\x20de\x20la\x20liste','length','569629lIwBvO','toLowerCase','494125LVeZqc','1674606NMwmLO','>\x20‚ÑπÔ∏è\x20Aucun\x20m√©dia\x20enregistr√©','HH:MM:ss','>\x20‚ö†Ô∏è\x20Type\x20de\x20m√©dia\x20non\x20support√©:\x20','sticker','Erreur\x20lors\x20de\x20la\x20liste\x20des\x20m√©dias','image','.ogg','Erreur\x20lors\x20de\x20l\x27envoi\x20du\x20m√©dia\x20','MEDIA_PATH','join','pid,hostname','config','>\x20‚ö†Ô∏è\x20√âchec\x20de\x20la\x20suppression:\x20','>\x20‚ö†Ô∏è\x20R√©pertoire\x20m√©dia\x20non\x20configur√©','445138fIMVfZ','Le\x20r√©pertoire\x20m√©dia\x20n\x27existe\x20pas:\x20','14qPGeIl','.jpg','error','.mp4','video','\x22\x20(','>\x20‚ö†Ô∏è\x20Erreur\x20lors\x20de\x20l\x27envoi\x20du\x20m√©dia\x20','env',',\x20cela\x20peut\x20etre\x20du\x20a\x20une\x20erreur\x20de\x20saisi\x20ou\x20fichier\x20inexistant\x20faite\x20','keys','pino-pretty','trim','7917900AElzGw','warn','>\x20‚ö†Ô∏è\x20Veuillez\x20sp√©cifier\x20le\x20nom\x20du\x20m√©dia\x20√†\x20supprimer.','gif','substring','MEDIA_PATH\x20n\x27est\x20pas\x20configur√©','whatsapp-media','>\x20‚ö†Ô∏è\x20Type\x20de\x20m√©dia\x20invalide!\x0aTypes\x20valides:\x20','3BDhBen','289048RBhoTP','extension','\x22\x20introuvable!','LOG_LEVEL','>\x20üóëÔ∏è\x20M√©dia\x20\x22','968vBUSzK'];a28_0x13aa=function(){return _0x2b5ef8;};return a28_0x13aa();}import a28_0x3ea18f from'pino';import a28_0x1e43c6 from'dotenv';import{listerMedias}from'../utils/listermedia.js';import{join}from'path';import{existsSync}from'fs';a28_0x1e43c6[a28_0x20c2c3(0x137)]();function a28_0x4482(_0x1f19eb,_0x7af0b9){const _0x13aac8=a28_0x13aa();return a28_0x4482=function(_0x4482ee,_0x3dafe2){_0x4482ee=_0x4482ee-0x120;let _0x4045ab=_0x13aac8[_0x4482ee];return _0x4045ab;},a28_0x4482(_0x1f19eb,_0x7af0b9);}const logger=a28_0x3ea18f({'level':process[a28_0x20c2c3(0x143)][a28_0x20c2c3(0x154)]||'debug','transport':{'target':a28_0x20c2c3(0x146),'options':{'colorize':!![],'ignore':a28_0x20c2c3(0x136),'translateTime':a28_0x20c2c3(0x12d),'includeStack':!![],'errorLikeObjectKeys':['err',a28_0x20c2c3(0x13e)]}},'base':null}),PREFIXE=process[a28_0x20c2c3(0x143)]['PREFIXE']||'!',MEDIA_PATH=process[a28_0x20c2c3(0x143)][a28_0x20c2c3(0x134)]||a28_0x20c2c3(0x122),MEDIA_TYPES={'image':{'extension':a28_0x20c2c3(0x13d),'sendFunction':send_image_message},'video':{'extension':a28_0x20c2c3(0x13f),'sendFunction':send_video_message},'audio':{'extension':a28_0x20c2c3(0x132),'sendFunction':send_audio_message},'gif':{'extension':a28_0x20c2c3(0x13f),'sendFunction':send_gif_message},'sticker':{'extension':a28_0x20c2c3(0x121),'sendFunction':send_sticker_message}};function ensureMediaDirectory(){const _0x1ab250=a28_0x20c2c3;if(!MEDIA_PATH)throw new Error(_0x1ab250(0x14d));if(!existsSync(MEDIA_PATH))return logger[_0x1ab250(0x149)](_0x1ab250(0x13b)+MEDIA_PATH),![];return!![];}export async function send_media_from_store(_0x1f2bba,_0x32e285,_0x1ad74b,_0x35ff2a,_0x52c7cf,_0x5d60b6=undefined,_0x500c8f=undefined){const _0x5e0c14=a28_0x20c2c3;try{if(!_0x32e285||!_0x1ad74b||!_0x35ff2a)throw new Error('Param√®tres\x20manquants\x20pour\x20l\x27envoi\x20de\x20m√©dia');if(!_0x52c7cf||_0x52c7cf[_0x5e0c14(0x147)]()==='')return await send_reaction_message(_0x32e285,_0x1ad74b,_0x35ff2a,'‚ùå'),await send_text_message(_0x32e285,_0x1ad74b,'>\x20‚ö†Ô∏è\x20Nom\x20de\x20fichier\x20manquant!\x0aUsage:\x20'+PREFIXE+_0x1f2bba+'\x20<nom>',_0x35ff2a,undefined,!![],![],!![]);if(!MEDIA_TYPES[_0x1f2bba])return await send_reaction_message(_0x32e285,_0x1ad74b,_0x35ff2a,'‚ùå'),await send_text_message(_0x32e285,_0x1ad74b,_0x5e0c14(0x12e)+_0x1f2bba,_0x35ff2a,undefined,!![],![],!![]);if(!ensureMediaDirectory())return await send_reaction_message(_0x32e285,_0x1ad74b,_0x35ff2a,'‚ùå'),await send_text_message(_0x32e285,_0x1ad74b,_0x5e0c14(0x139),_0x35ff2a,undefined,!![],![],!![]);const _0x4f8980=join(MEDIA_PATH,_0x52c7cf+'_'+_0x1f2bba+MEDIA_TYPES[_0x1f2bba][_0x5e0c14(0x152)]);if(!chercherFichier(_0x52c7cf,_0x1f2bba,MEDIA_PATH))return await send_reaction_message(_0x32e285,_0x1ad74b,_0x35ff2a,'‚ùå'),await send_text_message(_0x32e285,_0x1ad74b,'>\x20‚ö†Ô∏è\x20'+_0x1f2bba+'\x20\x22'+_0x52c7cf+_0x5e0c14(0x153),_0x35ff2a,undefined,!![],![],!![]);await send_reaction_message(_0x32e285,_0x1ad74b,_0x35ff2a,'‚è≥');switch(_0x1f2bba){case _0x5e0c14(0x131):await send_image_message(_0x32e285,_0x1ad74b,_0x35ff2a,_0x4f8980,undefined,_0x5d60b6==='vo');break;case _0x5e0c14(0x140):await send_video_message(_0x32e285,_0x1ad74b,_0x35ff2a,_0x4f8980,undefined,_0x500c8f==='ptv',_0x5d60b6==='vo');break;case'audio':await send_audio_message(_0x32e285,_0x1ad74b,_0x35ff2a,_0x4f8980,undefined,_0x5d60b6==='vo');break;case _0x5e0c14(0x14b):await send_gif_message(_0x32e285,_0x1ad74b,_0x35ff2a,_0x4f8980);break;case _0x5e0c14(0x12f):await send_sticker_message(_0x32e285,_0x1ad74b,_0x35ff2a,_0x4f8980,![]);break;}await send_reaction_message(_0x32e285,_0x1ad74b,_0x35ff2a,'‚úÖ');}catch(_0x1da886){logger[_0x5e0c14(0x13e)]({'error':_0x1da886},_0x5e0c14(0x133)+_0x1f2bba),await send_reaction_message(_0x32e285,_0x1ad74b,_0x35ff2a,'‚ùå'),await send_text_message(_0x32e285,_0x1ad74b,_0x5e0c14(0x142)+_0x1f2bba+_0x5e0c14(0x144)+PREFIXE+_0x5e0c14(0x124),_0x35ff2a,undefined,!![],![],!![]);}}export const liste_media=async(_0x520fdb,_0x597ea3,_0x19d96e)=>{const _0x540aac=a28_0x20c2c3;try{await send_reaction_message(_0x520fdb,_0x597ea3,_0x19d96e,'‚è≥');if(!ensureMediaDirectory())return await send_reaction_message(_0x520fdb,_0x597ea3,_0x19d96e,'‚ùå'),await send_text_message(_0x520fdb,_0x597ea3,_0x540aac(0x139),_0x19d96e,undefined,!![],![],!![]);const _0x5dc90f=await listerMedias(_0x540aac(0x14e));if(!_0x5dc90f||_0x5dc90f[_0x540aac(0x147)]()==='')await send_text_message(_0x520fdb,_0x597ea3,_0x540aac(0x12c),_0x19d96e,undefined,!![],![],!![]),await send_reaction_message(_0x520fdb,_0x597ea3,_0x19d96e,'‚ÑπÔ∏è');else{const _0xbd255b=0x1000;if(_0x5dc90f[_0x540aac(0x127)]>_0xbd255b){const _0x4f0c6b=[];for(let _0x1a2a87=0x0;_0x1a2a87<_0x5dc90f['length'];_0x1a2a87+=_0xbd255b){_0x4f0c6b['push'](_0x5dc90f[_0x540aac(0x14c)](_0x1a2a87,_0x1a2a87+_0xbd255b));}for(const _0x130836 of _0x4f0c6b){await send_text_message(_0x520fdb,_0x597ea3,_0x130836,_0x19d96e,undefined,!![]);}}else await send_text_message(_0x520fdb,_0x597ea3,_0x5dc90f,_0x19d96e,undefined,!![]);await send_reaction_message(_0x520fdb,_0x597ea3,_0x19d96e,'‚úÖ');}}catch(_0x3acb87){logger[_0x540aac(0x13e)]({'error':_0x3acb87},_0x540aac(0x130)),await send_reaction_message(_0x520fdb,_0x597ea3,_0x19d96e,'‚ùå'),await send_text_message(_0x520fdb,_0x597ea3,_0x540aac(0x126),_0x19d96e,undefined,!![],![],!![]);}};export const del_media=async(_0x34ee87,_0x3a488d,_0xbb4e8e,_0x1f4021)=>{const _0x26d9e0=a28_0x20c2c3;try{if(!_0x1f4021||_0x1f4021[_0x26d9e0(0x127)]===0x0)return await send_reaction_message(_0x34ee87,_0x3a488d,_0xbb4e8e,'‚ùå'),await send_text_message(_0x34ee87,_0x3a488d,_0x26d9e0(0x14a),_0xbb4e8e,undefined,!![],![],!![]);const _0x219803=_0x1f4021[0x0][_0x26d9e0(0x147)](),_0x3e9c22=_0x1f4021[0x1]?_0x1f4021[0x1][_0x26d9e0(0x129)]()[_0x26d9e0(0x147)]():null;if(!_0x3e9c22)return await send_reaction_message(_0x34ee87,_0x3a488d,_0xbb4e8e,'‚ùå'),await send_text_message(_0x34ee87,_0x3a488d,'>\x20‚ö†Ô∏è\x20Veuillez\x20sp√©cifier\x20le\x20type\x20de\x20m√©dia\x20√†\x20supprimer\x20(image,\x20video,\x20audio,\x20gif,\x20sticker).',_0xbb4e8e,undefined,!![],![],!![]);if(!MEDIA_TYPES[_0x3e9c22])return await send_reaction_message(_0x34ee87,_0x3a488d,_0xbb4e8e,'‚ùå'),await send_text_message(_0x34ee87,_0x3a488d,_0x26d9e0(0x14f)+Object[_0x26d9e0(0x145)](MEDIA_TYPES)[_0x26d9e0(0x135)](',\x20'),_0xbb4e8e,undefined,!![],![],!![]);if(!ensureMediaDirectory())return await send_reaction_message(_0x34ee87,_0x3a488d,_0xbb4e8e,'‚ùå'),await send_text_message(_0x34ee87,_0x3a488d,_0x26d9e0(0x139),_0xbb4e8e,undefined,!![],![],!![]);await send_reaction_message(_0x34ee87,_0x3a488d,_0xbb4e8e,'‚è≥');const _0x2dd2f7=await supprimerFichierCommencantPar(MEDIA_PATH,_0x219803+'_'+_0x3e9c22);return _0x2dd2f7?(await send_reaction_message(_0x34ee87,_0x3a488d,_0xbb4e8e,'‚úÖ'),await send_text_message(_0x34ee87,_0x3a488d,_0x26d9e0(0x155)+_0x219803+_0x26d9e0(0x141)+_0x3e9c22+_0x26d9e0(0x125),_0xbb4e8e,undefined,!![]),!![]):(await send_reaction_message(_0x34ee87,_0x3a488d,_0xbb4e8e,'‚ùå'),await send_text_message(_0x34ee87,_0x3a488d,_0x26d9e0(0x157)+_0x219803+'\x22\x20et\x20le\x20type\x20\x22'+_0x3e9c22+'\x22.',_0xbb4e8e,undefined,!![],![],!![]),![]);}catch(_0x313e24){return logger['error']({'error':_0x313e24},_0x26d9e0(0x123)),await send_reaction_message(_0x34ee87,_0x3a488d,_0xbb4e8e,'‚ùå'),await send_text_message(_0x34ee87,_0x3a488d,_0x26d9e0(0x138)+_0x313e24['message'],_0xbb4e8e,undefined,!![],![],!![]),![];}};