const a2_0x7ab80=a2_0x25bc;(function(_0x5a09e1,_0x33528d){const _0x1ec9ed=a2_0x25bc,_0x405ac0=_0x5a09e1();while(!![]){try{const _0x4c4278=-parseInt(_0x1ec9ed(0x9e))/0x1*(parseInt(_0x1ec9ed(0xce))/0x2)+-parseInt(_0x1ec9ed(0x97))/0x3*(-parseInt(_0x1ec9ed(0xd5))/0x4)+parseInt(_0x1ec9ed(0xc6))/0x5*(-parseInt(_0x1ec9ed(0xcb))/0x6)+-parseInt(_0x1ec9ed(0x9f))/0x7+parseInt(_0x1ec9ed(0xa2))/0x8+-parseInt(_0x1ec9ed(0xca))/0x9+parseInt(_0x1ec9ed(0xbc))/0xa*(parseInt(_0x1ec9ed(0xc2))/0xb);if(_0x4c4278===_0x33528d)break;else _0x405ac0['push'](_0x405ac0['shift']());}catch(_0x5ce78f){_0x405ac0['push'](_0x405ac0['shift']());}}}(a2_0x29a4,0x23fd4));import a2_0x52ad89 from'fs/promises';import a2_0x150a93 from'path';import{fileURLToPath}from'url';import{delete_message,send_text_message,send_reaction_message}from'../utils/sendmessagewa.js';import{isAdmin}from'../utils/gestion_groupe.js';const __dirname=a2_0x150a93['dirname'](fileURLToPath(import.meta['url'])),ANTIMEDIA_FILE=a2_0x150a93[a2_0x7ab80(0xbd)](__dirname,a2_0x7ab80(0xc3)),defaultConfig={'groupesActives':{},'parametresGlobaux':{'supprimerMedia':!![],'avertir':!![],'expulser':!![],'maxTentatives':0x3,'typesBloques':[a2_0x7ab80(0xc7),a2_0x7ab80(0xaa),a2_0x7ab80(0xa3),a2_0x7ab80(0xa6)]},'whitelist':[],'tentatives':{}};let config={...defaultConfig};async function chargerConfig(){const _0x55779c=a2_0x7ab80;try{await a2_0x52ad89[_0x55779c(0xa8)](a2_0x150a93[_0x55779c(0xaf)](ANTIMEDIA_FILE),{'recursive':!![]}),await a2_0x52ad89[_0x55779c(0x92)](ANTIMEDIA_FILE);const _0xaee7ba=await a2_0x52ad89[_0x55779c(0x90)](ANTIMEDIA_FILE,'utf-8');let _0x253a3f=JSON[_0x55779c(0xb5)](_0xaee7ba);const _0x4d50dd=Date['now']();for(const _0x4ba89a in _0x253a3f[_0x55779c(0xb2)]){_0x4d50dd-_0x253a3f[_0x55779c(0xb2)][_0x4ba89a][_0x55779c(0xa7)]>0x5265c00&&delete _0x253a3f[_0x55779c(0xb2)][_0x4ba89a];}return{...defaultConfig,..._0x253a3f};}catch(_0x921776){if(_0x921776['code']!==_0x55779c(0x91))return console[_0x55779c(0xd2)]('[AntiMedia]\x20Erreur\x20chargement\x20config:',_0x921776),await a2_0x52ad89[_0x55779c(0x8d)](ANTIMEDIA_FILE,JSON['stringify'](defaultConfig,null,0x2),_0x55779c(0xac)),{...defaultConfig};return{...defaultConfig};}}function a2_0x29a4(){const _0x2333f3=['[AntiMedia]\x20Erreur:','tentatives','keys','count','parse','expulser','includes','avertir','groupesActives','typesBloques','add','2789030XFHMBb','join','groupParticipantsUpdate','[AntiMedia]\x20Erreur\x20sauvegarde\x20config:','▸\x20Types\x20bloqués:\x20','>\x20🖼\x20AntiMedia\x20désactivé','22bfUisM','json/antimedia-config.json','catch','entries','245AydXXd','image','push','length','2424762dmxZTa','35514MIWZXG','protocolMessage','ajouté','170oZfahG','message','\x20interdit\x20!\x20(','stringify','error','>\x20⚠️\x20@','remove','3556kVqrMU','groupes\x20actifs.','parametresGlobaux','writeFile','>\x20ℹ️\x20Non\x20activé','▸\x20Avertissement:\x20','readFile','ENOENT','access','supprimerMedia','whitelist','\x20tentatives','>\x20🖼\x20Whitelist\x20','231FBBsJG','viewOnceMessage','[AntiMedia]\x20Module\x20prêt\x20avec','reactionMessage','>\x20ℹ️\x20Déjà\x20activé','filter','▸\x20Suppression:\x20','1193VzSLUV','308497loRkBi','participant','endsWith','1808624npsIfG','sticker','isArray','audio','document','lastAttempt','mkdir','maxTentatives','video','key','utf-8','>\x20🖼\x20Types\x20mis\x20à\x20jour:\x0a','function','dirname','true'];a2_0x29a4=function(){return _0x2333f3;};return a2_0x29a4();}async function sauvegarderConfig(){const _0x190c2b=a2_0x7ab80;try{await a2_0x52ad89[_0x190c2b(0x8d)](ANTIMEDIA_FILE,JSON[_0x190c2b(0xd1)](config,null,0x2),'utf-8');}catch(_0x2fa3e5){console[_0x190c2b(0xd2)](_0x190c2b(0xbf),_0x2fa3e5);}}((async()=>{const _0x5f4143=a2_0x7ab80;config=await chargerConfig(),console['log'](_0x5f4143(0x99),Object[_0x5f4143(0xb3)](config[_0x5f4143(0xb9)])[_0x5f4143(0xc9)],_0x5f4143(0xd6));})());async function enregistrerTentative(_0x567812,_0x3a3a01){const _0x4451be=a2_0x7ab80,_0x47b425=_0x567812+':'+_0x3a3a01,_0x3e7fb1=Date['now']();return config[_0x4451be(0xb2)][_0x47b425]={'count':(config['tentatives'][_0x47b425]?.[_0x4451be(0xb4)]||0x0)+0x1,'lastAttempt':_0x3e7fb1},await sauvegarderConfig(),config[_0x4451be(0xb2)][_0x47b425][_0x4451be(0xb4)];}async function resetTentatives(_0x432dcc,_0x100df5){const _0x1487db=a2_0x7ab80,_0x59a7b5=_0x432dcc+':'+_0x100df5;config[_0x1487db(0xb2)][_0x59a7b5]&&(delete config[_0x1487db(0xb2)][_0x59a7b5],await sauvegarderConfig());}function detecterMediaType(_0x27870d){const _0xc82d35=a2_0x7ab80,_0x4deebb={'imageMessage':_0xc82d35(0xc7),'videoMessage':_0xc82d35(0xaa),'stickerMessage':_0xc82d35(0xa3),'documentMessage':'document','audioMessage':_0xc82d35(0xa5),'viewOnceMessage':()=>{const _0x5a6a11=_0xc82d35,_0x4b40b9=Object[_0x5a6a11(0xb3)](_0x27870d[_0x5a6a11(0xcf)]?.[_0x5a6a11(0x98)]?.[_0x5a6a11(0xcf)]||{})[0x0];return _0x4b40b9?_0x4deebb[_0x4b40b9]:null;}};for(const [_0x302a2d,_0x20e86d]of Object[_0xc82d35(0xc5)](_0x4deebb)){if(typeof _0x20e86d===_0xc82d35(0xae)){const _0x57b6cc=_0x20e86d();if(_0x57b6cc)return _0x57b6cc;}else{if(_0x27870d[_0xc82d35(0xcf)]?.[_0x302a2d])return _0x20e86d;}}return null;}export function creerAntiMediaBaileys(_0x1b69b5,_0x41258d,_0x28ea5e){return async()=>{const _0xf74fc=a2_0x25bc;try{if(!_0x41258d[_0xf74fc(0xcf)]||!_0x28ea5e[_0xf74fc(0xa1)]('@g.us'))return;if(_0x41258d[_0xf74fc(0xcf)]?.[_0xf74fc(0xcc)]||_0x41258d[_0xf74fc(0xcf)]?.[_0xf74fc(0x9a)])return;if(!config[_0xf74fc(0xb9)][_0x28ea5e])return;const _0x300148=_0x41258d[_0xf74fc(0xab)][_0xf74fc(0xa0)];if(!_0x300148||await isAdmin(_0x1b69b5,_0x28ea5e,_0x300148))return;const _0x4ac53d={...config[_0xf74fc(0xd7)],...config[_0xf74fc(0xb9)][_0x28ea5e]},_0x421c46=detecterMediaType(_0x41258d);if(!_0x421c46||!_0x4ac53d[_0xf74fc(0xba)]['includes'](_0x421c46))return;const _0x3627e0=_0x300148['split']('@')[0x0],_0x1f662f=await enregistrerTentative(_0x28ea5e,_0x300148);_0x4ac53d[_0xf74fc(0x93)]&&setTimeout(async()=>{const _0x59bd08=_0xf74fc;await delete_message(_0x1b69b5,_0x41258d,_0x28ea5e,_0x41258d['key'])[_0x59bd08(0xc4)](()=>{});},0x3e8),_0x4ac53d[_0xf74fc(0xb8)]&&await send_text_message(_0x1b69b5,_0x41258d,_0xf74fc(0xd3)+_0x3627e0+',\x20'+_0x421c46+_0xf74fc(0xd0)+_0x1f662f+'/'+_0x4ac53d[_0xf74fc(0xa9)]+')',_0x28ea5e,[_0x300148],![],!![],![]),_0x1f662f>=_0x4ac53d[_0xf74fc(0xa9)]&&_0x4ac53d[_0xf74fc(0xb6)]&&(await _0x1b69b5[_0xf74fc(0xbe)](_0x28ea5e,[_0x300148],_0xf74fc(0xd4))['catch'](()=>{}),await send_text_message(_0x1b69b5,_0x41258d,'>\x20❌\x20@'+_0x3627e0+'\x20expulsé\x20pour\x20médias\x20interdits.',_0x28ea5e,[_0x300148],![],!![],![]),await resetTentatives(_0x28ea5e,_0x300148));}catch(_0x55ce8b){console[_0xf74fc(0xd2)](_0xf74fc(0xb1),_0x55ce8b);}};}export async function ajouterGroupeAntimedia(_0xed2f4f,_0x2e5583,_0x4865f8,_0x1e56a9){const _0x22ce4a=a2_0x7ab80;if(!_0x1e56a9||!await isAdmin(_0xed2f4f,_0x4865f8,_0x2e5583['key'][_0x22ce4a(0xa0)]))return await send_reaction_message(_0xed2f4f,_0x2e5583,_0x4865f8,'❌'),![];if(!config['groupesActives'][_0x4865f8])return config['groupesActives'][_0x4865f8]={...config[_0x22ce4a(0xd7)]},await sauvegarderConfig(),await send_reaction_message(_0xed2f4f,_0x2e5583,_0x4865f8,'✅'),await send_text_message(_0xed2f4f,_0x2e5583,'>\x20🖼\x20AntiMedia\x20activé\x0a'+(_0x22ce4a(0xc0)+config[_0x22ce4a(0xd7)]['typesBloques']['join'](',\x20')+'\x0a')+(_0x22ce4a(0x9d)+(config[_0x22ce4a(0xd7)][_0x22ce4a(0x93)]?'✅':'❌')+'\x0a')+(_0x22ce4a(0x8f)+(config[_0x22ce4a(0xd7)]['avertir']?'✅':'❌')+'\x0a')+('▸\x20Expulsion\x20après:\x20'+config[_0x22ce4a(0xd7)][_0x22ce4a(0xa9)]+_0x22ce4a(0x95)),_0x4865f8),!![];return await send_reaction_message(_0xed2f4f,_0x2e5583,_0x4865f8,'ℹ️'),await send_text_message(_0xed2f4f,_0x2e5583,_0x22ce4a(0x9b),_0x4865f8),![];}export async function supprimerGroupeAntimedia(_0xab9dd,_0x15a965,_0x538990,_0x16d051){const _0x489d9e=a2_0x7ab80;if(!_0x16d051)return await send_reaction_message(_0xab9dd,_0x15a965,_0x538990,'❌'),![];if(config[_0x489d9e(0xb9)][_0x538990])return delete config[_0x489d9e(0xb9)][_0x538990],await sauvegarderConfig(),await send_reaction_message(_0xab9dd,_0x15a965,_0x538990,'✅'),await send_text_message(_0xab9dd,_0x15a965,_0x489d9e(0xc1),_0x538990),!![];return await send_reaction_message(_0xab9dd,_0x15a965,_0x538990,'ℹ️'),await send_text_message(_0xab9dd,_0x15a965,_0x489d9e(0x8e),_0x538990),![];}export async function configurerAntiMedia(_0x35be7a,_0x3c22ad,_0x1a5ffd,_0x42d6e8,_0x1b6bcc){const _0x20712a=a2_0x7ab80;if(!await isAdmin(_0x35be7a,_0x1a5ffd,_0x3c22ad[_0x20712a(0xab)][_0x20712a(0xa0)]))return![];if(_0x42d6e8==='typesBloques'){if(!Array[_0x20712a(0xa4)](_0x1b6bcc))return await send_text_message(_0x35be7a,_0x3c22ad,'>\x20❌\x20Format\x20invalide\x20(tableau\x20requis)',_0x1a5ffd),![];return!config[_0x20712a(0xb9)][_0x1a5ffd]&&(config[_0x20712a(0xb9)][_0x1a5ffd]={...config['parametresGlobaux']}),config['groupesActives'][_0x1a5ffd][_0x20712a(0xba)]=_0x1b6bcc,await sauvegarderConfig(),await send_reaction_message(_0x35be7a,_0x3c22ad,_0x1a5ffd,'✅'),await send_text_message(_0x35be7a,_0x3c22ad,_0x20712a(0xad)+_0x1b6bcc[_0x20712a(0xbd)](',\x20'),_0x1a5ffd),!![];}const _0x11687b=[_0x20712a(0x93),_0x20712a(0xb8),_0x20712a(0xb6),_0x20712a(0xa9)];if(!_0x11687b[_0x20712a(0xb7)](_0x42d6e8))return![];return!config[_0x20712a(0xb9)][_0x1a5ffd]&&(config['groupesActives'][_0x1a5ffd]={...config['parametresGlobaux']}),config[_0x20712a(0xb9)][_0x1a5ffd][_0x42d6e8]=_0x42d6e8===_0x20712a(0xa9)?parseInt(_0x1b6bcc):_0x1b6bcc===_0x20712a(0xb0),await sauvegarderConfig(),await send_reaction_message(_0x35be7a,_0x3c22ad,_0x1a5ffd,'✅'),await send_text_message(_0x35be7a,_0x3c22ad,'>\x20🖼\x20Paramètre\x20mis\x20à\x20jour\x0a▸\x20'+_0x42d6e8+':\x20'+config[_0x20712a(0xb9)][_0x1a5ffd][_0x42d6e8],_0x1a5ffd),!![];}export async function gererWhitelist(_0x73879e,_0x476338,_0x16721d,_0x5d083f,_0x3a4ac9=a2_0x7ab80(0xbb)){const _0x1ca114=a2_0x7ab80;if(!await isAdmin(_0x73879e,_0x16721d,_0x476338['key'][_0x1ca114(0xa0)]))return![];if(_0x3a4ac9===_0x1ca114(0xbb)&&!config[_0x1ca114(0x94)][_0x1ca114(0xb7)](_0x5d083f))config[_0x1ca114(0x94)][_0x1ca114(0xc8)](_0x5d083f);else _0x3a4ac9===_0x1ca114(0xd4)&&(config['whitelist']=config[_0x1ca114(0x94)][_0x1ca114(0x9c)](_0x4d4c34=>_0x4d4c34!==_0x5d083f));return await sauvegarderConfig(),await send_reaction_message(_0x73879e,_0x476338,_0x16721d,'✅'),await send_text_message(_0x73879e,_0x476338,_0x1ca114(0x96)+(_0x3a4ac9===_0x1ca114(0xbb)?_0x1ca114(0xcd):'retiré')+':\x20'+_0x5d083f,_0x16721d),!![];}function a2_0x25bc(_0x3a5fec,_0x456a86){const _0x29a4fb=a2_0x29a4();return a2_0x25bc=function(_0x25bc52,_0x37194e){_0x25bc52=_0x25bc52-0x8d;let _0x2f769d=_0x29a4fb[_0x25bc52];return _0x2f769d;},a2_0x25bc(_0x3a5fec,_0x456a86);}export async function getStatutAntiMedia(_0x5d31f2){const _0x4b60d3=a2_0x7ab80;return{'estActif':!!config[_0x4b60d3(0xb9)][_0x5d31f2],'config':config[_0x4b60d3(0xb9)][_0x5d31f2]||config[_0x4b60d3(0xd7)],'whitelist':config[_0x4b60d3(0x94)]};}