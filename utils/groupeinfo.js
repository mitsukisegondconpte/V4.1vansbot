(function(_0x1e57fd,_0x15a74b){const _0x1d225b=a10_0x31b6,_0xdfe94a=_0x1e57fd();while(!![]){try{const _0x21417b=-parseInt(_0x1d225b(0x131))/0x1*(-parseInt(_0x1d225b(0x15a))/0x2)+-parseInt(_0x1d225b(0x170))/0x3*(-parseInt(_0x1d225b(0x137))/0x4)+-parseInt(_0x1d225b(0x153))/0x5+parseInt(_0x1d225b(0x167))/0x6+-parseInt(_0x1d225b(0x154))/0x7+-parseInt(_0x1d225b(0x150))/0x8*(-parseInt(_0x1d225b(0x158))/0x9)+-parseInt(_0x1d225b(0x13d))/0xa*(-parseInt(_0x1d225b(0x16d))/0xb);if(_0x21417b===_0x15a74b)break;else _0xdfe94a['push'](_0xdfe94a['shift']());}catch(_0x276017){_0xdfe94a['push'](_0xdfe94a['shift']());}}}(a10_0x4019,0x3a6d9));import{delay}from'baileys-x';function a10_0x4019(){const _0x4c6dcb=['Date\x20cr√©ation:\x20Inconnue','superadmin','Format\x20de\x20groupId\x20invalide\x20-\x20doit\x20se\x20terminer\x20par\x20\x27@g.us\x27','activiteHoraires','find','fetchMessagesFromWA','participants','admin','endsWith','Cr√©√©\x20le:\x20','videoMessage','8HUWNZV','subject','heure','674695rBTKZf','2271038VjtBBY','‚ùå\x20Impossible\x20de\x20r√©cup√©rer\x20les\x20m√©tadonn√©es\x20du\x20groupe','reactions','slice','1283634YRILgK','üîπ\x20','178npBMFT','toLocaleString','filter','üìà\x20ACTIVIT√â\x20(','vocal','texte','message','all','nom','owner','toLocaleDateString','getHours','error','165594xDItAt','charAt','key','count','creation','name','542619YsCmnB','catch','groupMetadata','4449usMpvR','conversation','desc','split','totalMessages','[ANALYSE\x20GROUPE]\x20Erreur:','match','Membre','@g.us','sort','length','h:\x20','\x0a‚è∞\x20HEURES\x20D\x27ACTIVIT√â\x20‚è∞\x0a','‚Ä¢\x20R√©partition:\x0a','autre','text','fill','audioMessage','reactionMessage','\x0aüîÑ\x20G√©n√©r√©\x20le:\x20','Super\x20Admin','imageMessage','warn','\x20\x20-\x20','messagesParMembre','map','333oppozz','forEach','toUpperCase','Inconnue','extendedTextMessage','trim','148MwjxGM','Param√®tres\x20manquants\x20:\x20sock\x20et\x20groupId\x20sont\x20requis','typesMessages','Aucune\x20description','entries','Nom:\x20Non\x20disponible','90EYKDTC','motsClefs','toLowerCase','date','Nom:\x20','messageTimestamp','%)\x0a','Propri√©taire:\x20Inconnu'];a10_0x4019=function(){return _0x4c6dcb;};return a10_0x4019();}let owner='';export async function analyserGroupeWhatsApp(_0x40d524,_0x575a85){const _0x2efca3=a10_0x31b6;if(!_0x40d524||!_0x575a85)throw new Error(_0x2efca3(0x138));if(typeof _0x575a85!=='string'||!_0x575a85[_0x2efca3(0x14d)](_0x2efca3(0x178)))throw new Error(_0x2efca3(0x147));try{const _0x5d0920=await getMetadataWithRetry(_0x40d524,_0x575a85);if(!_0x5d0920)return _0x2efca3(0x155);const _0x92127d=await getParticipantsDetails(_0x40d524,_0x5d0920),_0x108270=await fetchGroupMessages(_0x40d524,_0x575a85),_0x251782=analyzeGroupData(_0x108270,_0x92127d);return generateFullReport(_0x5d0920,_0x92127d,_0x251782);}catch(_0x36e36a){return console[_0x2efca3(0x166)](_0x2efca3(0x175),_0x36e36a),'‚ùå\x20Erreur\x20lors\x20de\x20l\x27analyse\x20du\x20groupe:\x0a'+_0x36e36a[_0x2efca3(0x160)];}}async function getMetadataWithRetry(_0x300ff1,_0x5cda71,_0x407844=0x3){const _0x44f286=a10_0x31b6;for(let _0x38b2b8=0x0;_0x38b2b8<_0x407844;_0x38b2b8++){try{const _0x31befc=await _0x300ff1[_0x44f286(0x16f)](_0x5cda71);if(_0x31befc)return _0x31befc;}catch(_0x557243){if(_0x38b2b8===_0x407844-0x1)throw _0x557243;await delay(0x3e8*(_0x38b2b8+0x1));}}return null;}async function getParticipantsDetails(_0x5e9961,_0x3b151a){const _0x11e415=a10_0x31b6;try{return await Promise[_0x11e415(0x161)](_0x3b151a['participants']['map'](async _0x58639d=>{const _0x1e6d1f=_0x11e415;try{const [_0x38da0d]=await _0x5e9961['onWhatsApp'](_0x58639d['id'])[_0x1e6d1f(0x16e)](()=>[null]);return{'id':_0x58639d['id'],'nom':_0x38da0d?.[_0x1e6d1f(0x16c)]||_0x58639d['id']['split']('@')[0x0],'role':_0x58639d['admin']?_0x58639d[_0x1e6d1f(0x14c)]===_0x1e6d1f(0x146)?_0x1e6d1f(0x12b):'Admin':'Membre','dateAjout':_0x58639d[_0x1e6d1f(0x140)]?new Date(_0x58639d[_0x1e6d1f(0x140)]*0x3e8)[_0x1e6d1f(0x164)]():_0x1e6d1f(0x134)};}catch(_0x15de5e){return{'id':_0x58639d['id'],'nom':_0x58639d['id']['split']('@')[0x0],'role':_0x1e6d1f(0x177),'dateAjout':'Inconnue'};}}));}catch(_0x3cab7b){return console[_0x11e415(0x12d)]('Erreur\x20r√©cup√©ration\x20participants:',_0x3cab7b),_0x3b151a[_0x11e415(0x14b)][_0x11e415(0x130)](_0x468ce4=>({'id':_0x468ce4['id'],'nom':_0x468ce4['id'][_0x11e415(0x173)]('@')[0x0],'role':_0x11e415(0x177),'dateAjout':_0x11e415(0x134)}));}}async function fetchGroupMessages(_0x445785,_0x1fa8ae,_0x560fb8=0x64){const _0x151af1=a10_0x31b6;try{return await _0x445785[_0x151af1(0x14a)](_0x1fa8ae,_0x560fb8)[_0x151af1(0x16e)](()=>[]);}catch(_0x47d350){return console[_0x151af1(0x12d)]('Erreur\x20r√©cup√©ration\x20messages:',_0x47d350),[];}}function analyzeGroupData(_0x57c52c,_0x5dafc2){const _0x1ec824=a10_0x31b6,_0x2d40a8={'totalMessages':_0x57c52c[_0x1ec824(0x17a)],'messagesParMembre':{},'typesMessages':{'texte':0x0,'media':0x0,'vocal':0x0,'lien':0x0,'autre':0x0},'activiteHoraires':Array(0x18)[_0x1ec824(0x180)](0x0),'reactions':{},'motsClefs':{}};return _0x57c52c[_0x1ec824(0x132)](_0x55c340=>{const _0x11dc96=_0x1ec824;try{const _0x1aaf7f=_0x55c340['key']['participant']||_0x55c340[_0x11dc96(0x169)]['remoteJid'];_0x2d40a8[_0x11dc96(0x12f)][_0x1aaf7f]=(_0x2d40a8['messagesParMembre'][_0x1aaf7f]||0x0)+0x1;if(_0x55c340[_0x11dc96(0x160)]?.['conversation'])_0x2d40a8['typesMessages'][_0x11dc96(0x15f)]++;else{if(_0x55c340['message']?.[_0x11dc96(0x12c)]||_0x55c340[_0x11dc96(0x160)]?.[_0x11dc96(0x14f)])_0x2d40a8[_0x11dc96(0x139)]['media']++;else{if(_0x55c340['message']?.[_0x11dc96(0x181)])_0x2d40a8[_0x11dc96(0x139)][_0x11dc96(0x15e)]++;else{if(_0x55c340[_0x11dc96(0x160)]?.[_0x11dc96(0x135)]?.[_0x11dc96(0x17f)]?.[_0x11dc96(0x176)](/\bhttp\S+/gi))_0x2d40a8[_0x11dc96(0x139)]['lien']++;else _0x2d40a8[_0x11dc96(0x139)][_0x11dc96(0x17e)]++;}}}const _0x5bf9ed=_0x55c340[_0x11dc96(0x142)]?new Date(_0x55c340['messageTimestamp']*0x3e8)[_0x11dc96(0x165)]():0x0;_0x2d40a8[_0x11dc96(0x148)][_0x5bf9ed]++;if(_0x55c340['message']?.[_0x11dc96(0x129)]?.[_0x11dc96(0x17f)]){const _0x9ce5d5=_0x55c340[_0x11dc96(0x160)][_0x11dc96(0x129)][_0x11dc96(0x17f)];_0x2d40a8['reactions'][_0x9ce5d5]=(_0x2d40a8[_0x11dc96(0x156)][_0x9ce5d5]||0x0)+0x1;}const _0x1db8f0=_0x55c340[_0x11dc96(0x160)]?.[_0x11dc96(0x171)]||_0x55c340[_0x11dc96(0x160)]?.['extendedTextMessage']?.[_0x11dc96(0x17f)]||'',_0xd417c5=_0x1db8f0[_0x11dc96(0x136)]()['split'](/\s+/)[0x0]?.[_0x11dc96(0x13f)]();_0xd417c5&&_0xd417c5[_0x11dc96(0x17a)]>0x2&&(_0x2d40a8[_0x11dc96(0x13e)][_0xd417c5]=(_0x2d40a8['motsClefs'][_0xd417c5]||0x0)+0x1);}catch(_0x28d274){console[_0x11dc96(0x12d)]('Erreur\x20analyse\x20message:',_0x28d274);}}),_0x2d40a8;}function a10_0x31b6(_0x361274,_0x2fab35){const _0x40193f=a10_0x4019();return a10_0x31b6=function(_0x31b6ff,_0xb37542){_0x31b6ff=_0x31b6ff-0x129;let _0x127ccf=_0x40193f[_0x31b6ff];return _0x127ccf;},a10_0x31b6(_0x361274,_0x2fab35);}function generateFullReport(_0x349991,_0x386b48,_0x4c34a6){const _0x472daa=a10_0x31b6;let _0x76c111='üìä\x20RAPPORT\x20DU\x20GROUPE\x20WHATSAPP\x20üìä\x0a\x0a';owner=_0x349991[_0x472daa(0x163)],_0x76c111+=_0x472daa(0x159)+(_0x349991['subject']?_0x472daa(0x141)+_0x349991[_0x472daa(0x151)]:_0x472daa(0x13c))+'\x0a',_0x76c111+='üîπ\x20'+(_0x349991[_0x472daa(0x16b)]?_0x472daa(0x14e)+new Date(_0x349991[_0x472daa(0x16b)]*0x3e8)[_0x472daa(0x15b)]():_0x472daa(0x145))+'\x0a',_0x76c111+=_0x472daa(0x159)+(_0x349991[_0x472daa(0x163)]?'Propri√©taire:\x20@'+_0x349991[_0x472daa(0x163)]['split']('@')[0x0]:_0x472daa(0x144))+'\x0a',_0x76c111+='üîπ\x20Description:\x20'+(_0x349991[_0x472daa(0x172)]||_0x472daa(0x13a))+'\x0a',_0x76c111+='üîπ\x20Membres:\x20'+_0x386b48[_0x472daa(0x17a)]+'\x0a\x0a',_0x76c111+=_0x472daa(0x15d)+_0x4c34a6[_0x472daa(0x174)]+'\x20messages\x20analys√©s)\x20üìà\x0a';if(_0x4c34a6[_0x472daa(0x174)]>0x0){_0x76c111+=_0x472daa(0x17d);for(const [_0x2783d7,_0x2294ab]of Object['entries'](_0x4c34a6[_0x472daa(0x139)])){if(_0x2294ab>0x0){const _0x5444c4=Math['round'](_0x2294ab/_0x4c34a6['totalMessages']*0x64);_0x76c111+=_0x472daa(0x12e)+(_0x2783d7[_0x472daa(0x168)](0x0)[_0x472daa(0x133)]()+_0x2783d7[_0x472daa(0x157)](0x1))+':\x20'+_0x2294ab+'\x20('+_0x5444c4+_0x472daa(0x143);}}const _0x34c28a=Object[_0x472daa(0x13b)](_0x4c34a6[_0x472daa(0x12f)])[_0x472daa(0x179)]((_0xc79f9a,_0x45ae9c)=>_0x45ae9c[0x1]-_0xc79f9a[0x1])[_0x472daa(0x157)](0x0,0x5);_0x34c28a[_0x472daa(0x17a)]>0x0&&(_0x76c111+='\x0aüèÜ\x20TOP\x20MEMBRES\x20ACTIFS\x20üèÜ\x0a',_0x34c28a[_0x472daa(0x132)](([_0x1d9fdf,_0x112f88],_0x35f4ef)=>{const _0x547590=_0x472daa,_0x18bfa4=_0x386b48[_0x547590(0x149)](_0x45ba45=>_0x45ba45['id']===_0x1d9fdf)||{'nom':_0x1d9fdf[_0x547590(0x173)]('@')[0x0]},_0xb718fd=Math['round'](_0x112f88/_0x4c34a6['totalMessages']*0x64);_0x76c111+=_0x35f4ef+0x1+'.\x20'+_0x18bfa4[_0x547590(0x162)]+':\x20'+_0x112f88+'\x20msg\x20('+_0xb718fd+_0x547590(0x143);}));const _0x123a21=_0x4c34a6[_0x472daa(0x148)][_0x472daa(0x130)]((_0x9f61c9,_0x2b43d8)=>({'heure':_0x2b43d8,'count':_0x9f61c9}))[_0x472daa(0x15c)](_0x2b5cb7=>_0x2b5cb7['count']>0x0)['sort']((_0x5a8498,_0x2ced09)=>_0x2ced09['count']-_0x5a8498[_0x472daa(0x16a)]);_0x123a21[_0x472daa(0x17a)]>0x0&&(_0x76c111+=_0x472daa(0x17c),_0x123a21[_0x472daa(0x157)](0x0,0x5)[_0x472daa(0x132)](_0x3a0a23=>{const _0x4c5c3a=_0x472daa;_0x76c111+='‚Ä¢\x20'+_0x3a0a23[_0x4c5c3a(0x152)]+'h-'+(_0x3a0a23[_0x4c5c3a(0x152)]+0x1)+_0x4c5c3a(0x17b)+_0x3a0a23['count']+'\x20msg\x0a';}));}else _0x76c111+='‚ö†Ô∏è\x20Aucun\x20message\x20disponible\x20pour\x20analyse\x0a';return _0x76c111+=_0x472daa(0x12a)+new Date()[_0x472daa(0x15b)](),{'rapport':_0x76c111,'owner':owner};}