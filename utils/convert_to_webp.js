function a5_0x4b4e(_0x24bcba,_0x63d98c){const _0xe33575=a5_0xe335();return a5_0x4b4e=function(_0x4b4e62,_0x4f05c1){_0x4b4e62=_0x4b4e62-0xb8;let _0x352e63=_0xe33575[_0x4b4e62];return _0x352e63;},a5_0x4b4e(_0x24bcba,_0x63d98c);}const a5_0xa89d4c=a5_0x4b4e;(function(_0x33376a,_0x2d00c3){const _0x23bc3a=a5_0x4b4e,_0x1d5daf=_0x33376a();while(!![]){try{const _0x4286bb=-parseInt(_0x23bc3a(0xd9))/0x1+parseInt(_0x23bc3a(0xbc))/0x2+-parseInt(_0x23bc3a(0xbb))/0x3*(-parseInt(_0x23bc3a(0xd5))/0x4)+-parseInt(_0x23bc3a(0xc0))/0x5*(parseInt(_0x23bc3a(0xca))/0x6)+parseInt(_0x23bc3a(0xc5))/0x7*(-parseInt(_0x23bc3a(0xbe))/0x8)+parseInt(_0x23bc3a(0xbd))/0x9+-parseInt(_0x23bc3a(0xba))/0xa*(-parseInt(_0x23bc3a(0xc2))/0xb);if(_0x4286bb===_0x2d00c3)break;else _0x1d5daf['push'](_0x1d5daf['shift']());}catch(_0x13fdf4){_0x1d5daf['push'](_0x1d5daf['shift']());}}}(a5_0xe335,0x19d3f));import a5_0x3323e5 from'sharp';import{promises as a5_0x2ecbdb}from'fs';function escapeSvgText(_0x24eb37){const _0x13f42f=a5_0x4b4e;return _0x24eb37[_0x13f42f(0xdf)](/&/g,_0x13f42f(0xcf))['replace'](/</g,'&lt;')[_0x13f42f(0xdf)](/>/g,_0x13f42f(0xc1))[_0x13f42f(0xdf)](/"/g,'&quot;')[_0x13f42f(0xdf)](/'/g,_0x13f42f(0xc4));}function a5_0xe335(){const _0x5f3072=['rgba(3,\x203,\x203,\x200.5)','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<text\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20x=\x2250%\x22\x20y=\x2240\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family=\x22','116778BMLFVq','center','drawImage','Calibri,\x20Arial,\x20sans-serif','\x22\x20height=\x22','&amp;','composite','Segoe\x20UI\x20Emoji,\x20Apple\x20Color\x20Emoji,\x20Noto\x20Color\x20Emoji,\x20sans-serif','VANSBOT','image/webp','test','2884ZDHnWp','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<rect\x20width=\x22100%\x22\x20height=\x22100%\x22\x20fill=\x22#0303037e\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','fillRect','log','21702AKOljh','toBuffer','✅\x20Sticker\x20généré\x20:','error','font','from','replace','❌\x20Erreur\x20création\x20sticker\x20:','resize','19640QtPYiG','309tdiIUK','175884gOufsb','1467873VNEDRL','20920zSDOlJ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20width=\x22','45gGUPdF','&gt;','957cpGeGq','warn','&apos;','518FQkSaF','fillStyle','middle'];a5_0xe335=function(){return _0x5f3072;};return a5_0xe335();}function getFontFamily(_0x38baf5){const _0x5c3231=a5_0x4b4e,_0x2c8eda=/[\p{Emoji}]/gu,_0x21fe53=_0x2c8eda[_0x5c3231(0xd4)](_0x38baf5);if(_0x21fe53)return _0x5c3231(0xd1);return _0x5c3231(0xcd);}export async function convertToStickerimage(_0x23d4b3,_0x3ca905,_0x4b22f0=a5_0xa89d4c(0xd2)){const _0x2036e6=a5_0xa89d4c;try{const _0x2270c2=0x200,_0x25f411=0x3c,_0x4749c1=_0x2270c2+_0x25f411,_0x31f575=escapeSvgText(_0x4b22f0),_0xff8dfb=getFontFamily(_0x4b22f0);return await a5_0x3323e5({'create':{'width':_0x2270c2,'height':_0x4749c1,'channels':0x4,'background':{'r':0x0,'g':0x0,'b':0x0,'alpha':0x0}}})[_0x2036e6(0xd0)]([{'input':await a5_0x3323e5(_0x23d4b3)[_0x2036e6(0xb9)](_0x2270c2,_0x2270c2,{'fit':'contain','background':{'r':0x0,'g':0x0,'b':0x0,'alpha':0x0}})[_0x2036e6(0xda)](),'top':0x0,'left':0x0},{'input':Buffer[_0x2036e6(0xde)](_0x2036e6(0xbf)+_0x2270c2+_0x2036e6(0xce)+_0x25f411+_0x2036e6(0xd6)),'top':_0x2270c2,'left':0x0},{'input':Buffer[_0x2036e6(0xde)](_0x2036e6(0xbf)+_0x2270c2+'\x22\x20height=\x22'+_0x25f411+_0x2036e6(0xc9)+_0xff8dfb+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size=\x2235\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20fill=\x22#ffffffff\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-anchor=\x22middle\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dominant-baseline=\x22middle\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20>'+_0x31f575+'</text>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'),'top':_0x2270c2,'left':0x0}])['webp']()['toFile'](_0x3ca905),console[_0x2036e6(0xd8)](_0x2036e6(0xdb),_0x3ca905),_0x3ca905;}catch(_0x549640){console['error'](_0x2036e6(0xb8),_0x549640);throw _0x549640;}}export async function convertToStickerWithCanvas(_0x4bc3ea,_0x598e2c,_0x2e2c7c=a5_0xa89d4c(0xd2)){const _0x5cdba6=a5_0xa89d4c;try{let _0x7c0961;try{_0x7c0961=await import('canvas');}catch{return console[_0x5cdba6(0xc3)]('Canvas\x20n\x27est\x20pas\x20disponible,\x20utilisation\x20de\x20la\x20méthode\x20SVG'),convertToStickerimage(_0x4bc3ea,_0x598e2c,_0x2e2c7c);}const {createCanvas:_0x3a7641,loadImage:_0x11cd79,registerFont:_0xe2ebb6}=_0x7c0961,_0x4d41a5=0x200,_0x1cae38=0x3c,_0xc26e3e=_0x4d41a5+_0x1cae38,_0x5b04f1=_0x3a7641(_0x4d41a5,_0xc26e3e),_0x520642=_0x5b04f1['getContext']('2d'),_0x446915=await _0x11cd79(_0x4bc3ea);_0x520642[_0x5cdba6(0xcc)](_0x446915,0x0,0x0,_0x4d41a5,_0x4d41a5),_0x520642[_0x5cdba6(0xc6)]=_0x5cdba6(0xc8),_0x520642[_0x5cdba6(0xd7)](0x0,_0x4d41a5,_0x4d41a5,_0x1cae38),_0x520642[_0x5cdba6(0xdd)]='35px\x20\x22Segoe\x20UI\x20Emoji\x22,\x20\x22Apple\x20Color\x20Emoji\x22,\x20\x22Noto\x20Color\x20Emoji\x22,\x20sans-serif',_0x520642[_0x5cdba6(0xc6)]='#ffffff',_0x520642['textAlign']=_0x5cdba6(0xcb),_0x520642['textBaseline']=_0x5cdba6(0xc7),_0x520642['fillText'](_0x2e2c7c,_0x4d41a5/0x2,_0x4d41a5+_0x1cae38/0x2);const _0x2bb135=_0x5b04f1[_0x5cdba6(0xda)](_0x5cdba6(0xd3));return await a5_0x2ecbdb['writeFile'](_0x598e2c,_0x2bb135),console['log']('✅\x20Sticker\x20généré\x20avec\x20Canvas\x20:',_0x598e2c),_0x598e2c;}catch(_0x2597f9){return console[_0x5cdba6(0xdc)]('❌\x20Erreur\x20création\x20sticker\x20avec\x20Canvas\x20:',_0x2597f9),convertToStickerimage(_0x4bc3ea,_0x598e2c,_0x2e2c7c);}}